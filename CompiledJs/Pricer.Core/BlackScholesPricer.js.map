{"version":3,"sources":["../../../Pricer.Core/BlackScholesPricer.fs"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIK;AAAA;AAAA;;AAAmB;AAAD;;AAAlB;AAAA;AAAA,wDAGO;AAAA;AAAA,sCAEG,uBAAH,SAGQ,CAAE,SAAI,kCAAJ,IACE,CAAC,aAAa,MAAM,6BAApB,uBADJ,KAEE,mBAAmB,8BAFrB,CAHR,OAMa,KAAK,mBAAmB,8BANrC,OAOa,iBAPb,OAQa,iBARb,qBAU2B,gBAAgB,SAAK,iCAAL,CAV3C,SAWe,0BAA0B,qBAXzC,4BAYU,6BAEO,4CAFP,EAEqD,MAFrD,cAZV,+BAiBU,6BAEY,kCAAL,IAFP,GAEY,kCAFZ,YACa,kCAAL,IADR,GACa,kCADb,QAjBV,CAFA,oDAsBJ,uCAtBI;AAAW;AAHlB;;AAAA;AAAA","file":"BlackScholesPricer.js","sourcesContent":["ï»¿namespace Pricer.Core\r\n\r\nopen System\r\n\r\ntype BlackScholesPricer(math:IMathProvider) = \r\n    \r\n    member this.blackScholes (stock:StockInfo) (option:OptionLeg) =\r\n        let price,delta =\r\n            // We can only calculate if the option concerns the future\r\n            if option.TimeToExpiry > 0.0 then\r\n                // Calculate d1 and d2 and pass them to cumulative distribution\r\n                let d1 =\r\n                    ( log(stock.CurrentPrice / option.Strike) +\r\n                        (stock.Rate + 0.5 * pown stock.Volatility 2) * option.TimeToExpiry ) /\r\n                    ( stock.Volatility * sqrt option.TimeToExpiry )\r\n                let d2 = d1 - stock.Volatility * sqrt option.TimeToExpiry\r\n                let N1 = math.cdf(d1)\r\n                let N2 = math.cdf(d2)\r\n\r\n                let discountedStrike = option.Strike * exp (-stock.Rate * option.TimeToExpiry)\r\n                let call = stock.CurrentPrice * N1 - discountedStrike * N2\r\n                match option.Kind with\r\n                    | Call -> call, N1\r\n                    | Put -> call + discountedStrike - stock.CurrentPrice, N1 - 1.0\r\n            else\r\n                // If the option has expired, calculate payoff directly\r\n                match option.Kind with\r\n                    | Call -> max (stock.CurrentPrice - option.Strike) 0.0,1.0\r\n                    | Put -> max (option.Strike - stock.CurrentPrice) 0.0,1.0\r\n        {\r\n            Premium = price\r\n            Delta = delta\r\n        }\r\n\r\n    \r\n"]}